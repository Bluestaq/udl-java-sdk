// File generated from our OpenAPI spec by Stainless.

package com.unifieddatalibrary.api.models.closelyspacedobjects

import com.fasterxml.jackson.module.kotlin.jacksonTypeRef
import com.unifieddatalibrary.api.core.jsonMapper
import java.time.OffsetDateTime
import kotlin.jvm.optionals.getOrNull
import org.assertj.core.api.Assertions.assertThat
import org.junit.jupiter.api.Test

internal class CloselyspacedobjectsAbridgedTest {

    @Test
    fun create() {
        val closelyspacedobjectsAbridged =
            CloselyspacedobjectsAbridged.builder()
                .classificationMarking("U")
                .csoState("POSSIBLE")
                .dataMode(CloselyspacedobjectsAbridged.DataMode.TEST)
                .eventStartTime(OffsetDateTime.parse("2019-12-27T18:11:19.117Z"))
                .eventType("RENDEZVOUS")
                .source("Bluestaq")
                .id("026dd511-8ba5-47d3-9909-836149f87686")
                .actorSvEpoch(OffsetDateTime.parse("2019-12-27T18:11:19.117Z"))
                .analysisDuration(60.1)
                .analysisEpoch(OffsetDateTime.parse("2019-12-27T18:11:19.117Z"))
                .compType("LONGITUDE")
                .createdAt(OffsetDateTime.parse("2018-01-01T16:00:00.123Z"))
                .createdBy("some.user")
                .addCsoDetail(
                    CloselyspacedobjectsAbridged.CsoDetail.builder()
                        .objectEvent("MEAN")
                        .objectType("DELTA")
                        .id("026dd511-8ba5-47d3-9909-836149f87686")
                        .apogee(1.1)
                        .classificationMarking("U")
                        .dataMode(CloselyspacedobjectsAbridged.CsoDetail.DataMode.TEST)
                        .idCso("CSO-ID")
                        .inclination(45.1)
                        .longitude(45.1)
                        .perigee(1.1)
                        .build()
                )
                .deltaVTol(0.123)
                .durationThreshold(60.1)
                .eventEndTime(OffsetDateTime.parse("2019-12-27T18:11:19.117Z"))
                .eventIntervalCoverage(22.3)
                .extId("EXTERNAL-ID")
                .hohmannDeltaV(0.012)
                .idActorSv("ACTOR-SV-ID")
                .idOnOrbit1("ONORBIT1-ID")
                .idOnOrbit2("ONORBIT2-ID")
                .idTargetSv("TARGET-SV-ID")
                .inclinationDeltaV(0.012)
                .indicationSource("Manually input")
                .lonTol(30.1)
                .maxRange(233.266)
                .minPlaneSepAngle(30.1)
                .minPlaneSepEpoch(OffsetDateTime.parse("2019-12-27T18:11:19.117Z"))
                .minRange(0.5)
                .minRangeAnalysisDuration(60.1)
                .minRangeEpoch(OffsetDateTime.parse("2019-12-27T18:11:19.117Z"))
                .notes("FREE-TEXT")
                .numSubIntervals(0)
                .orbitAlignDel(12.3)
                .orbitPlaneTol(1.23)
                .origin("THIRD_PARTY_DATASOURCE")
                .origNetwork("OPS1")
                .origObjectId1("ORIGONORBIT1-ID")
                .origObjectId2("ORIGONORBIT2-ID")
                .rangeThreshold(0.1)
                .rangeTol(0.123)
                .relPos(listOf(0.12, 0.23, -0.12))
                .relPosMag(0.12)
                .relSpeedMag(1.23)
                .relVel(listOf(0.12, 0.23, -0.12))
                .satNo1(1)
                .satNo2(2)
                .sourceDl("AXE")
                .stationLimLonTol(12.5)
                .targetSvEpoch(OffsetDateTime.parse("2019-12-27T18:11:19.117Z"))
                .totalDeltaV(2.46)
                .build()

        assertThat(closelyspacedobjectsAbridged.classificationMarking()).isEqualTo("U")
        assertThat(closelyspacedobjectsAbridged.csoState()).isEqualTo("POSSIBLE")
        assertThat(closelyspacedobjectsAbridged.dataMode())
            .isEqualTo(CloselyspacedobjectsAbridged.DataMode.TEST)
        assertThat(closelyspacedobjectsAbridged.eventStartTime())
            .isEqualTo(OffsetDateTime.parse("2019-12-27T18:11:19.117Z"))
        assertThat(closelyspacedobjectsAbridged.eventType()).isEqualTo("RENDEZVOUS")
        assertThat(closelyspacedobjectsAbridged.source()).isEqualTo("Bluestaq")
        assertThat(closelyspacedobjectsAbridged.id())
            .contains("026dd511-8ba5-47d3-9909-836149f87686")
        assertThat(closelyspacedobjectsAbridged.actorSvEpoch())
            .contains(OffsetDateTime.parse("2019-12-27T18:11:19.117Z"))
        assertThat(closelyspacedobjectsAbridged.analysisDuration()).contains(60.1)
        assertThat(closelyspacedobjectsAbridged.analysisEpoch())
            .contains(OffsetDateTime.parse("2019-12-27T18:11:19.117Z"))
        assertThat(closelyspacedobjectsAbridged.compType()).contains("LONGITUDE")
        assertThat(closelyspacedobjectsAbridged.createdAt())
            .contains(OffsetDateTime.parse("2018-01-01T16:00:00.123Z"))
        assertThat(closelyspacedobjectsAbridged.createdBy()).contains("some.user")
        assertThat(closelyspacedobjectsAbridged.csoDetails().getOrNull())
            .containsExactly(
                CloselyspacedobjectsAbridged.CsoDetail.builder()
                    .objectEvent("MEAN")
                    .objectType("DELTA")
                    .id("026dd511-8ba5-47d3-9909-836149f87686")
                    .apogee(1.1)
                    .classificationMarking("U")
                    .dataMode(CloselyspacedobjectsAbridged.CsoDetail.DataMode.TEST)
                    .idCso("CSO-ID")
                    .inclination(45.1)
                    .longitude(45.1)
                    .perigee(1.1)
                    .build()
            )
        assertThat(closelyspacedobjectsAbridged.deltaVTol()).contains(0.123)
        assertThat(closelyspacedobjectsAbridged.durationThreshold()).contains(60.1)
        assertThat(closelyspacedobjectsAbridged.eventEndTime())
            .contains(OffsetDateTime.parse("2019-12-27T18:11:19.117Z"))
        assertThat(closelyspacedobjectsAbridged.eventIntervalCoverage()).contains(22.3)
        assertThat(closelyspacedobjectsAbridged.extId()).contains("EXTERNAL-ID")
        assertThat(closelyspacedobjectsAbridged.hohmannDeltaV()).contains(0.012)
        assertThat(closelyspacedobjectsAbridged.idActorSv()).contains("ACTOR-SV-ID")
        assertThat(closelyspacedobjectsAbridged.idOnOrbit1()).contains("ONORBIT1-ID")
        assertThat(closelyspacedobjectsAbridged.idOnOrbit2()).contains("ONORBIT2-ID")
        assertThat(closelyspacedobjectsAbridged.idTargetSv()).contains("TARGET-SV-ID")
        assertThat(closelyspacedobjectsAbridged.inclinationDeltaV()).contains(0.012)
        assertThat(closelyspacedobjectsAbridged.indicationSource()).contains("Manually input")
        assertThat(closelyspacedobjectsAbridged.lonTol()).contains(30.1)
        assertThat(closelyspacedobjectsAbridged.maxRange()).contains(233.266)
        assertThat(closelyspacedobjectsAbridged.minPlaneSepAngle()).contains(30.1)
        assertThat(closelyspacedobjectsAbridged.minPlaneSepEpoch())
            .contains(OffsetDateTime.parse("2019-12-27T18:11:19.117Z"))
        assertThat(closelyspacedobjectsAbridged.minRange()).contains(0.5)
        assertThat(closelyspacedobjectsAbridged.minRangeAnalysisDuration()).contains(60.1)
        assertThat(closelyspacedobjectsAbridged.minRangeEpoch())
            .contains(OffsetDateTime.parse("2019-12-27T18:11:19.117Z"))
        assertThat(closelyspacedobjectsAbridged.notes()).contains("FREE-TEXT")
        assertThat(closelyspacedobjectsAbridged.numSubIntervals()).contains(0)
        assertThat(closelyspacedobjectsAbridged.orbitAlignDel()).contains(12.3)
        assertThat(closelyspacedobjectsAbridged.orbitPlaneTol()).contains(1.23)
        assertThat(closelyspacedobjectsAbridged.origin()).contains("THIRD_PARTY_DATASOURCE")
        assertThat(closelyspacedobjectsAbridged.origNetwork()).contains("OPS1")
        assertThat(closelyspacedobjectsAbridged.origObjectId1()).contains("ORIGONORBIT1-ID")
        assertThat(closelyspacedobjectsAbridged.origObjectId2()).contains("ORIGONORBIT2-ID")
        assertThat(closelyspacedobjectsAbridged.rangeThreshold()).contains(0.1)
        assertThat(closelyspacedobjectsAbridged.rangeTol()).contains(0.123)
        assertThat(closelyspacedobjectsAbridged.relPos().getOrNull())
            .containsExactly(0.12, 0.23, -0.12)
        assertThat(closelyspacedobjectsAbridged.relPosMag()).contains(0.12)
        assertThat(closelyspacedobjectsAbridged.relSpeedMag()).contains(1.23)
        assertThat(closelyspacedobjectsAbridged.relVel().getOrNull())
            .containsExactly(0.12, 0.23, -0.12)
        assertThat(closelyspacedobjectsAbridged.satNo1()).contains(1)
        assertThat(closelyspacedobjectsAbridged.satNo2()).contains(2)
        assertThat(closelyspacedobjectsAbridged.sourceDl()).contains("AXE")
        assertThat(closelyspacedobjectsAbridged.stationLimLonTol()).contains(12.5)
        assertThat(closelyspacedobjectsAbridged.targetSvEpoch())
            .contains(OffsetDateTime.parse("2019-12-27T18:11:19.117Z"))
        assertThat(closelyspacedobjectsAbridged.totalDeltaV()).contains(2.46)
    }

    @Test
    fun roundtrip() {
        val jsonMapper = jsonMapper()
        val closelyspacedobjectsAbridged =
            CloselyspacedobjectsAbridged.builder()
                .classificationMarking("U")
                .csoState("POSSIBLE")
                .dataMode(CloselyspacedobjectsAbridged.DataMode.TEST)
                .eventStartTime(OffsetDateTime.parse("2019-12-27T18:11:19.117Z"))
                .eventType("RENDEZVOUS")
                .source("Bluestaq")
                .id("026dd511-8ba5-47d3-9909-836149f87686")
                .actorSvEpoch(OffsetDateTime.parse("2019-12-27T18:11:19.117Z"))
                .analysisDuration(60.1)
                .analysisEpoch(OffsetDateTime.parse("2019-12-27T18:11:19.117Z"))
                .compType("LONGITUDE")
                .createdAt(OffsetDateTime.parse("2018-01-01T16:00:00.123Z"))
                .createdBy("some.user")
                .addCsoDetail(
                    CloselyspacedobjectsAbridged.CsoDetail.builder()
                        .objectEvent("MEAN")
                        .objectType("DELTA")
                        .id("026dd511-8ba5-47d3-9909-836149f87686")
                        .apogee(1.1)
                        .classificationMarking("U")
                        .dataMode(CloselyspacedobjectsAbridged.CsoDetail.DataMode.TEST)
                        .idCso("CSO-ID")
                        .inclination(45.1)
                        .longitude(45.1)
                        .perigee(1.1)
                        .build()
                )
                .deltaVTol(0.123)
                .durationThreshold(60.1)
                .eventEndTime(OffsetDateTime.parse("2019-12-27T18:11:19.117Z"))
                .eventIntervalCoverage(22.3)
                .extId("EXTERNAL-ID")
                .hohmannDeltaV(0.012)
                .idActorSv("ACTOR-SV-ID")
                .idOnOrbit1("ONORBIT1-ID")
                .idOnOrbit2("ONORBIT2-ID")
                .idTargetSv("TARGET-SV-ID")
                .inclinationDeltaV(0.012)
                .indicationSource("Manually input")
                .lonTol(30.1)
                .maxRange(233.266)
                .minPlaneSepAngle(30.1)
                .minPlaneSepEpoch(OffsetDateTime.parse("2019-12-27T18:11:19.117Z"))
                .minRange(0.5)
                .minRangeAnalysisDuration(60.1)
                .minRangeEpoch(OffsetDateTime.parse("2019-12-27T18:11:19.117Z"))
                .notes("FREE-TEXT")
                .numSubIntervals(0)
                .orbitAlignDel(12.3)
                .orbitPlaneTol(1.23)
                .origin("THIRD_PARTY_DATASOURCE")
                .origNetwork("OPS1")
                .origObjectId1("ORIGONORBIT1-ID")
                .origObjectId2("ORIGONORBIT2-ID")
                .rangeThreshold(0.1)
                .rangeTol(0.123)
                .relPos(listOf(0.12, 0.23, -0.12))
                .relPosMag(0.12)
                .relSpeedMag(1.23)
                .relVel(listOf(0.12, 0.23, -0.12))
                .satNo1(1)
                .satNo2(2)
                .sourceDl("AXE")
                .stationLimLonTol(12.5)
                .targetSvEpoch(OffsetDateTime.parse("2019-12-27T18:11:19.117Z"))
                .totalDeltaV(2.46)
                .build()

        val roundtrippedCloselyspacedobjectsAbridged =
            jsonMapper.readValue(
                jsonMapper.writeValueAsString(closelyspacedobjectsAbridged),
                jacksonTypeRef<CloselyspacedobjectsAbridged>(),
            )

        assertThat(roundtrippedCloselyspacedobjectsAbridged).isEqualTo(closelyspacedobjectsAbridged)
    }
}
