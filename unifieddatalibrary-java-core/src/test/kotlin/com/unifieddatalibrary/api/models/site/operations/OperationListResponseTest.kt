// File generated from our OpenAPI spec by Stainless.

package com.unifieddatalibrary.api.models.site.operations

import com.fasterxml.jackson.module.kotlin.jacksonTypeRef
import com.unifieddatalibrary.api.core.jsonMapper
import java.time.OffsetDateTime
import kotlin.jvm.optionals.getOrNull
import org.assertj.core.api.Assertions.assertThat
import org.junit.jupiter.api.Test

internal class OperationListResponseTest {

    @Test
    fun create() {
        val operationListResponse =
            OperationListResponse.builder()
                .classificationMarking("U")
                .dataMode(OperationListResponse.DataMode.TEST)
                .idSite("a150b3ee-884b-b9ac-60a0-6408b4b16088")
                .source("Bluestaq")
                .id("3f28f60b-3a50-2aef-ac88-8e9d0e39912b")
                .createdAt(OffsetDateTime.parse("2018-01-01T16:00:00.123Z"))
                .createdBy("some.user")
                .addDailyOperation(
                    OperationListResponse.DailyOperation.builder()
                        .dayOfWeek(OperationListResponse.DailyOperation.DayOfWeek.MONDAY)
                        .addOperatingHour(
                            OperationListResponse.DailyOperation.OperatingHour.builder()
                                .opStartTime("12:00")
                                .opStopTime("22:00")
                                .build()
                        )
                        .operationName("Arrivals")
                        .ophrsLastChangedBy("John Smith")
                        .ophrsLastChangedDate(OffsetDateTime.parse("2024-01-01T16:00:00.123Z"))
                        .build()
                )
                .dopsLastChangedBy("John Smith")
                .dopsLastChangedDate(OffsetDateTime.parse("2024-01-01T16:00:00.000Z"))
                .dopsLastChangedReason("Example reason for change.")
                .idLaunchSite("b150b3ee-884b-b9ac-60a0-6408b4b16088")
                .addMaximumOnGround(
                    OperationListResponse.MaximumOnGround.builder()
                        .aircraftMds("C017A")
                        .contingencyMog(3)
                        .mogLastChangedBy("John Smith")
                        .mogLastChangedDate(OffsetDateTime.parse("2024-01-01T16:00:00.000Z"))
                        .wideParkingMog(1)
                        .wideWorkingMog(1)
                        .build()
                )
                .mogsLastChangedBy("Jane Doe")
                .mogsLastChangedDate(OffsetDateTime.parse("2024-01-01T16:00:00.000Z"))
                .mogsLastChangedReason("Example reason for change.")
                .addOperationalDeviation(
                    OperationListResponse.OperationalDeviation.builder()
                        .affectedAircraftMds("C017A")
                        .affectedMog(1)
                        .aircraftOnGroundTime("14:00")
                        .crewRestTime("14:00")
                        .odLastChangedBy("John Smith")
                        .odLastChangedDate(OffsetDateTime.parse("2024-01-01T16:00:00.000Z"))
                        .odRemark("Example remark about this operational deviation.")
                        .build()
                )
                .addOperationalPlanning(
                    OperationListResponse.OperationalPlanning.builder()
                        .opEndDate(OffsetDateTime.parse("2024-01-01T16:00:00.000Z"))
                        .opLastChangedBy("John Smith")
                        .opLastChangedDate(OffsetDateTime.parse("2024-01-01T16:00:00.000Z"))
                        .opRemark("Example planning remark")
                        .opSource("a3")
                        .opStartDate(OffsetDateTime.parse("2024-01-01T16:00:00.000Z"))
                        .opStatus("Verified")
                        .build()
                )
                .origin("THIRD_PARTY_DATASOURCE")
                .origNetwork("OPS1")
                .addPathway(
                    OperationListResponse.Pathway.builder()
                        .pwDefinition("AGP: 14L, K6, K, G (ANG APRN TO TWY K), GUARD (MAIN)")
                        .pwLastChangedBy("John Smith")
                        .pwLastChangedDate(OffsetDateTime.parse("2024-01-01T16:00:00.000Z"))
                        .pwType("Taxiway")
                        .pwUsage("Arrival")
                        .build()
                )
                .sourceDl("AXE")
                .updatedAt(OffsetDateTime.parse("2018-01-01T16:00:00.123Z"))
                .updatedBy("some.user")
                .addWaiver(
                    OperationListResponse.Waiver.builder()
                        .expirationDate(OffsetDateTime.parse("2024-01-01T16:00:00.000Z"))
                        .hasExpired(false)
                        .issueDate(OffsetDateTime.parse("2024-01-01T16:00:00.000Z"))
                        .issuerName("John Smith")
                        .requesterName("Jane Doe")
                        .requesterPhoneNumber("808-123-4567")
                        .requestingUnit("2A1")
                        .waiverAppliesTo("C017A")
                        .waiverDescription("Example waiver description")
                        .waiverLastChangedBy("J. Appleseed")
                        .waiverLastChangedDate(OffsetDateTime.parse("2024-01-01T16:00:00.000Z"))
                        .build()
                )
                .build()

        assertThat(operationListResponse.classificationMarking()).isEqualTo("U")
        assertThat(operationListResponse.dataMode()).isEqualTo(OperationListResponse.DataMode.TEST)
        assertThat(operationListResponse.idSite()).isEqualTo("a150b3ee-884b-b9ac-60a0-6408b4b16088")
        assertThat(operationListResponse.source()).isEqualTo("Bluestaq")
        assertThat(operationListResponse.id()).contains("3f28f60b-3a50-2aef-ac88-8e9d0e39912b")
        assertThat(operationListResponse.createdAt())
            .contains(OffsetDateTime.parse("2018-01-01T16:00:00.123Z"))
        assertThat(operationListResponse.createdBy()).contains("some.user")
        assertThat(operationListResponse.dailyOperations().getOrNull())
            .containsExactly(
                OperationListResponse.DailyOperation.builder()
                    .dayOfWeek(OperationListResponse.DailyOperation.DayOfWeek.MONDAY)
                    .addOperatingHour(
                        OperationListResponse.DailyOperation.OperatingHour.builder()
                            .opStartTime("12:00")
                            .opStopTime("22:00")
                            .build()
                    )
                    .operationName("Arrivals")
                    .ophrsLastChangedBy("John Smith")
                    .ophrsLastChangedDate(OffsetDateTime.parse("2024-01-01T16:00:00.123Z"))
                    .build()
            )
        assertThat(operationListResponse.dopsLastChangedBy()).contains("John Smith")
        assertThat(operationListResponse.dopsLastChangedDate())
            .contains(OffsetDateTime.parse("2024-01-01T16:00:00.000Z"))
        assertThat(operationListResponse.dopsLastChangedReason())
            .contains("Example reason for change.")
        assertThat(operationListResponse.idLaunchSite())
            .contains("b150b3ee-884b-b9ac-60a0-6408b4b16088")
        assertThat(operationListResponse.maximumOnGrounds().getOrNull())
            .containsExactly(
                OperationListResponse.MaximumOnGround.builder()
                    .aircraftMds("C017A")
                    .contingencyMog(3)
                    .mogLastChangedBy("John Smith")
                    .mogLastChangedDate(OffsetDateTime.parse("2024-01-01T16:00:00.000Z"))
                    .wideParkingMog(1)
                    .wideWorkingMog(1)
                    .build()
            )
        assertThat(operationListResponse.mogsLastChangedBy()).contains("Jane Doe")
        assertThat(operationListResponse.mogsLastChangedDate())
            .contains(OffsetDateTime.parse("2024-01-01T16:00:00.000Z"))
        assertThat(operationListResponse.mogsLastChangedReason())
            .contains("Example reason for change.")
        assertThat(operationListResponse.operationalDeviations().getOrNull())
            .containsExactly(
                OperationListResponse.OperationalDeviation.builder()
                    .affectedAircraftMds("C017A")
                    .affectedMog(1)
                    .aircraftOnGroundTime("14:00")
                    .crewRestTime("14:00")
                    .odLastChangedBy("John Smith")
                    .odLastChangedDate(OffsetDateTime.parse("2024-01-01T16:00:00.000Z"))
                    .odRemark("Example remark about this operational deviation.")
                    .build()
            )
        assertThat(operationListResponse.operationalPlannings().getOrNull())
            .containsExactly(
                OperationListResponse.OperationalPlanning.builder()
                    .opEndDate(OffsetDateTime.parse("2024-01-01T16:00:00.000Z"))
                    .opLastChangedBy("John Smith")
                    .opLastChangedDate(OffsetDateTime.parse("2024-01-01T16:00:00.000Z"))
                    .opRemark("Example planning remark")
                    .opSource("a3")
                    .opStartDate(OffsetDateTime.parse("2024-01-01T16:00:00.000Z"))
                    .opStatus("Verified")
                    .build()
            )
        assertThat(operationListResponse.origin()).contains("THIRD_PARTY_DATASOURCE")
        assertThat(operationListResponse.origNetwork()).contains("OPS1")
        assertThat(operationListResponse.pathways().getOrNull())
            .containsExactly(
                OperationListResponse.Pathway.builder()
                    .pwDefinition("AGP: 14L, K6, K, G (ANG APRN TO TWY K), GUARD (MAIN)")
                    .pwLastChangedBy("John Smith")
                    .pwLastChangedDate(OffsetDateTime.parse("2024-01-01T16:00:00.000Z"))
                    .pwType("Taxiway")
                    .pwUsage("Arrival")
                    .build()
            )
        assertThat(operationListResponse.sourceDl()).contains("AXE")
        assertThat(operationListResponse.updatedAt())
            .contains(OffsetDateTime.parse("2018-01-01T16:00:00.123Z"))
        assertThat(operationListResponse.updatedBy()).contains("some.user")
        assertThat(operationListResponse.waivers().getOrNull())
            .containsExactly(
                OperationListResponse.Waiver.builder()
                    .expirationDate(OffsetDateTime.parse("2024-01-01T16:00:00.000Z"))
                    .hasExpired(false)
                    .issueDate(OffsetDateTime.parse("2024-01-01T16:00:00.000Z"))
                    .issuerName("John Smith")
                    .requesterName("Jane Doe")
                    .requesterPhoneNumber("808-123-4567")
                    .requestingUnit("2A1")
                    .waiverAppliesTo("C017A")
                    .waiverDescription("Example waiver description")
                    .waiverLastChangedBy("J. Appleseed")
                    .waiverLastChangedDate(OffsetDateTime.parse("2024-01-01T16:00:00.000Z"))
                    .build()
            )
    }

    @Test
    fun roundtrip() {
        val jsonMapper = jsonMapper()
        val operationListResponse =
            OperationListResponse.builder()
                .classificationMarking("U")
                .dataMode(OperationListResponse.DataMode.TEST)
                .idSite("a150b3ee-884b-b9ac-60a0-6408b4b16088")
                .source("Bluestaq")
                .id("3f28f60b-3a50-2aef-ac88-8e9d0e39912b")
                .createdAt(OffsetDateTime.parse("2018-01-01T16:00:00.123Z"))
                .createdBy("some.user")
                .addDailyOperation(
                    OperationListResponse.DailyOperation.builder()
                        .dayOfWeek(OperationListResponse.DailyOperation.DayOfWeek.MONDAY)
                        .addOperatingHour(
                            OperationListResponse.DailyOperation.OperatingHour.builder()
                                .opStartTime("12:00")
                                .opStopTime("22:00")
                                .build()
                        )
                        .operationName("Arrivals")
                        .ophrsLastChangedBy("John Smith")
                        .ophrsLastChangedDate(OffsetDateTime.parse("2024-01-01T16:00:00.123Z"))
                        .build()
                )
                .dopsLastChangedBy("John Smith")
                .dopsLastChangedDate(OffsetDateTime.parse("2024-01-01T16:00:00.000Z"))
                .dopsLastChangedReason("Example reason for change.")
                .idLaunchSite("b150b3ee-884b-b9ac-60a0-6408b4b16088")
                .addMaximumOnGround(
                    OperationListResponse.MaximumOnGround.builder()
                        .aircraftMds("C017A")
                        .contingencyMog(3)
                        .mogLastChangedBy("John Smith")
                        .mogLastChangedDate(OffsetDateTime.parse("2024-01-01T16:00:00.000Z"))
                        .wideParkingMog(1)
                        .wideWorkingMog(1)
                        .build()
                )
                .mogsLastChangedBy("Jane Doe")
                .mogsLastChangedDate(OffsetDateTime.parse("2024-01-01T16:00:00.000Z"))
                .mogsLastChangedReason("Example reason for change.")
                .addOperationalDeviation(
                    OperationListResponse.OperationalDeviation.builder()
                        .affectedAircraftMds("C017A")
                        .affectedMog(1)
                        .aircraftOnGroundTime("14:00")
                        .crewRestTime("14:00")
                        .odLastChangedBy("John Smith")
                        .odLastChangedDate(OffsetDateTime.parse("2024-01-01T16:00:00.000Z"))
                        .odRemark("Example remark about this operational deviation.")
                        .build()
                )
                .addOperationalPlanning(
                    OperationListResponse.OperationalPlanning.builder()
                        .opEndDate(OffsetDateTime.parse("2024-01-01T16:00:00.000Z"))
                        .opLastChangedBy("John Smith")
                        .opLastChangedDate(OffsetDateTime.parse("2024-01-01T16:00:00.000Z"))
                        .opRemark("Example planning remark")
                        .opSource("a3")
                        .opStartDate(OffsetDateTime.parse("2024-01-01T16:00:00.000Z"))
                        .opStatus("Verified")
                        .build()
                )
                .origin("THIRD_PARTY_DATASOURCE")
                .origNetwork("OPS1")
                .addPathway(
                    OperationListResponse.Pathway.builder()
                        .pwDefinition("AGP: 14L, K6, K, G (ANG APRN TO TWY K), GUARD (MAIN)")
                        .pwLastChangedBy("John Smith")
                        .pwLastChangedDate(OffsetDateTime.parse("2024-01-01T16:00:00.000Z"))
                        .pwType("Taxiway")
                        .pwUsage("Arrival")
                        .build()
                )
                .sourceDl("AXE")
                .updatedAt(OffsetDateTime.parse("2018-01-01T16:00:00.123Z"))
                .updatedBy("some.user")
                .addWaiver(
                    OperationListResponse.Waiver.builder()
                        .expirationDate(OffsetDateTime.parse("2024-01-01T16:00:00.000Z"))
                        .hasExpired(false)
                        .issueDate(OffsetDateTime.parse("2024-01-01T16:00:00.000Z"))
                        .issuerName("John Smith")
                        .requesterName("Jane Doe")
                        .requesterPhoneNumber("808-123-4567")
                        .requestingUnit("2A1")
                        .waiverAppliesTo("C017A")
                        .waiverDescription("Example waiver description")
                        .waiverLastChangedBy("J. Appleseed")
                        .waiverLastChangedDate(OffsetDateTime.parse("2024-01-01T16:00:00.000Z"))
                        .build()
                )
                .build()

        val roundtrippedOperationListResponse =
            jsonMapper.readValue(
                jsonMapper.writeValueAsString(operationListResponse),
                jacksonTypeRef<OperationListResponse>(),
            )

        assertThat(roundtrippedOperationListResponse).isEqualTo(operationListResponse)
    }
}
