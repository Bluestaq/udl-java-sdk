// File generated from our OpenAPI spec by Stainless.

package com.unifieddatalibrary.api.models.transponder

import com.fasterxml.jackson.module.kotlin.jacksonTypeRef
import com.unifieddatalibrary.api.core.jsonMapper
import com.unifieddatalibrary.api.models.ChannelFull
import java.time.OffsetDateTime
import kotlin.jvm.optionals.getOrNull
import org.assertj.core.api.Assertions.assertThat
import org.junit.jupiter.api.Test

internal class TransponderTupleResponseTest {

    @Test
    fun create() {
        val transponderTupleResponse =
            TransponderTupleResponse.builder()
                .classificationMarking("U")
                .dataMode(TransponderTupleResponse.DataMode.TEST)
                .idComm("REF-COMM-ID")
                .source("Bluestaq")
                .id("TRANSPONDER-ID")
                .addChannel(
                    ChannelFull.builder()
                        .classificationMarking("U")
                        .dataMode(ChannelFull.DataMode.TEST)
                        .idTransponder("REF-TRANSPONDER-ID")
                        .name("Example name")
                        .source("system.source")
                        .id("CHANNEL-ID")
                        .apid("AP-ID")
                        .beamName("B8VD")
                        .compression("Example compression")
                        .createdAt(OffsetDateTime.parse("2018-01-01T16:00:00.123Z"))
                        .createdBy("some.user")
                        .encryption("Example encryption")
                        .idBeam("REF-BEAM-ID")
                        .idRfBand("REF-RFBAND-ID")
                        .origin("example_origin")
                        .origNetwork("ORIG")
                        .owner("example_owner")
                        .pkg("Example pkg")
                        .res("Example res")
                        .sid("S-ID")
                        .type("Example type")
                        .updatedAt(OffsetDateTime.parse("2018-01-01T16:00:00.123Z"))
                        .updatedBy("some.user")
                        .vpid("VP-ID")
                        .build()
                )
                .createdAt(OffsetDateTime.parse("2018-01-01T16:00:00.123Z"))
                .createdBy("some.user")
                .fec(0)
                .format("format")
                .modulation("Auto")
                .name("AA10")
                .nid("N-ID")
                .origin("THIRD_PARTY_DATASOURCE")
                .origNetwork("ORIG")
                .symbolRate(4.0)
                .system("DVB-S")
                .tid("T-ID")
                .ttf(1.53261520047876)
                .updatedAt(OffsetDateTime.parse("2018-01-01T16:00:00.123Z"))
                .updatedBy("some.user")
                .build()

        assertThat(transponderTupleResponse.classificationMarking()).isEqualTo("U")
        assertThat(transponderTupleResponse.dataMode())
            .isEqualTo(TransponderTupleResponse.DataMode.TEST)
        assertThat(transponderTupleResponse.idComm()).isEqualTo("REF-COMM-ID")
        assertThat(transponderTupleResponse.source()).isEqualTo("Bluestaq")
        assertThat(transponderTupleResponse.id()).contains("TRANSPONDER-ID")
        assertThat(transponderTupleResponse.channels().getOrNull())
            .containsExactly(
                ChannelFull.builder()
                    .classificationMarking("U")
                    .dataMode(ChannelFull.DataMode.TEST)
                    .idTransponder("REF-TRANSPONDER-ID")
                    .name("Example name")
                    .source("system.source")
                    .id("CHANNEL-ID")
                    .apid("AP-ID")
                    .beamName("B8VD")
                    .compression("Example compression")
                    .createdAt(OffsetDateTime.parse("2018-01-01T16:00:00.123Z"))
                    .createdBy("some.user")
                    .encryption("Example encryption")
                    .idBeam("REF-BEAM-ID")
                    .idRfBand("REF-RFBAND-ID")
                    .origin("example_origin")
                    .origNetwork("ORIG")
                    .owner("example_owner")
                    .pkg("Example pkg")
                    .res("Example res")
                    .sid("S-ID")
                    .type("Example type")
                    .updatedAt(OffsetDateTime.parse("2018-01-01T16:00:00.123Z"))
                    .updatedBy("some.user")
                    .vpid("VP-ID")
                    .build()
            )
        assertThat(transponderTupleResponse.createdAt())
            .contains(OffsetDateTime.parse("2018-01-01T16:00:00.123Z"))
        assertThat(transponderTupleResponse.createdBy()).contains("some.user")
        assertThat(transponderTupleResponse.fec()).contains(0)
        assertThat(transponderTupleResponse.format()).contains("format")
        assertThat(transponderTupleResponse.modulation()).contains("Auto")
        assertThat(transponderTupleResponse.name()).contains("AA10")
        assertThat(transponderTupleResponse.nid()).contains("N-ID")
        assertThat(transponderTupleResponse.origin()).contains("THIRD_PARTY_DATASOURCE")
        assertThat(transponderTupleResponse.origNetwork()).contains("ORIG")
        assertThat(transponderTupleResponse.symbolRate()).contains(4.0)
        assertThat(transponderTupleResponse.system()).contains("DVB-S")
        assertThat(transponderTupleResponse.tid()).contains("T-ID")
        assertThat(transponderTupleResponse.ttf()).contains(1.53261520047876)
        assertThat(transponderTupleResponse.updatedAt())
            .contains(OffsetDateTime.parse("2018-01-01T16:00:00.123Z"))
        assertThat(transponderTupleResponse.updatedBy()).contains("some.user")
    }

    @Test
    fun roundtrip() {
        val jsonMapper = jsonMapper()
        val transponderTupleResponse =
            TransponderTupleResponse.builder()
                .classificationMarking("U")
                .dataMode(TransponderTupleResponse.DataMode.TEST)
                .idComm("REF-COMM-ID")
                .source("Bluestaq")
                .id("TRANSPONDER-ID")
                .addChannel(
                    ChannelFull.builder()
                        .classificationMarking("U")
                        .dataMode(ChannelFull.DataMode.TEST)
                        .idTransponder("REF-TRANSPONDER-ID")
                        .name("Example name")
                        .source("system.source")
                        .id("CHANNEL-ID")
                        .apid("AP-ID")
                        .beamName("B8VD")
                        .compression("Example compression")
                        .createdAt(OffsetDateTime.parse("2018-01-01T16:00:00.123Z"))
                        .createdBy("some.user")
                        .encryption("Example encryption")
                        .idBeam("REF-BEAM-ID")
                        .idRfBand("REF-RFBAND-ID")
                        .origin("example_origin")
                        .origNetwork("ORIG")
                        .owner("example_owner")
                        .pkg("Example pkg")
                        .res("Example res")
                        .sid("S-ID")
                        .type("Example type")
                        .updatedAt(OffsetDateTime.parse("2018-01-01T16:00:00.123Z"))
                        .updatedBy("some.user")
                        .vpid("VP-ID")
                        .build()
                )
                .createdAt(OffsetDateTime.parse("2018-01-01T16:00:00.123Z"))
                .createdBy("some.user")
                .fec(0)
                .format("format")
                .modulation("Auto")
                .name("AA10")
                .nid("N-ID")
                .origin("THIRD_PARTY_DATASOURCE")
                .origNetwork("ORIG")
                .symbolRate(4.0)
                .system("DVB-S")
                .tid("T-ID")
                .ttf(1.53261520047876)
                .updatedAt(OffsetDateTime.parse("2018-01-01T16:00:00.123Z"))
                .updatedBy("some.user")
                .build()

        val roundtrippedTransponderTupleResponse =
            jsonMapper.readValue(
                jsonMapper.writeValueAsString(transponderTupleResponse),
                jacksonTypeRef<TransponderTupleResponse>(),
            )

        assertThat(roundtrippedTransponderTupleResponse).isEqualTo(transponderTupleResponse)
    }
}
