// File generated from our OpenAPI spec by Stainless.

package com.unifieddatalibrary.api.models.airevents

import com.fasterxml.jackson.module.kotlin.jacksonTypeRef
import com.unifieddatalibrary.api.core.jsonMapper
import java.time.OffsetDateTime
import kotlin.jvm.optionals.getOrNull
import org.assertj.core.api.Assertions.assertThat
import org.junit.jupiter.api.Test

internal class AirEventTupleResponseTest {

    @Test
    fun create() {
        val airEventTupleResponse =
            AirEventTupleResponse.builder()
                .classificationMarking("U")
                .dataMode(AirEventTupleResponse.DataMode.TEST)
                .source("Bluestaq")
                .type("FUEL TRANSFER")
                .id("026dd511-8ba5-47d3-9909-836149f87686")
                .actualArrTime(OffsetDateTime.parse("2024-01-07T14:00:03.123Z"))
                .actualDepTime(OffsetDateTime.parse("2024-01-07T14:17:03.123Z"))
                .arct(OffsetDateTime.parse("2024-01-07T15:11:27.123Z"))
                .arEventType("V")
                .arrPurpose("A")
                .arTrackId("CH61")
                .arTrackName("CH61 POST")
                .baseAlt(28000.1)
                .cancelled(false)
                .createdAt(OffsetDateTime.parse("2018-01-01T16:00:00.123Z"))
                .createdBy("some.user")
                .depPurpose("Q")
                .estArrTime(OffsetDateTime.parse("2024-01-07T13:59:48.123Z"))
                .estDepTime(OffsetDateTime.parse("2024-01-07T14:19:48.123Z"))
                .externalAirEventId("MB014313032022407540")
                .externalArTrackId("6418a4b68e5c3896bf024cc79aa4174c")
                .idMission("190dea6d-2a90-45a2-a276-be9047d9b96c")
                .idSortie("b9866c03-2397-4506-8153-852e72d9b54f")
                .legNum(825)
                .location("901EW")
                .numTankers(1)
                .origin("THIRD_PARTY_DATASOURCE")
                .origNetwork("OPS1")
                .plannedArrTime(OffsetDateTime.parse("2024-01-07T13:55:43.123Z"))
                .plannedDepTime(OffsetDateTime.parse("2024-01-07T14:15:43.123Z"))
                .priority("1A2")
                .addReceiver(
                    AirEventTupleResponse.Receiver.builder()
                        .altReceiverMissionId("1UN05201L121")
                        .amcReceiverMissionId("8PH000B1S052")
                        .externalReceiverId("3fb8169f-adc1-4667-acab-8415a012d766")
                        .fuelOn(15000000.1)
                        .idReceiverAirfield("96c4c2ba-a031-4e58-9b8e-3c6fb90a7534")
                        .idReceiverMission("ce99757d-f733-461f-8939-3939d4f05946")
                        .idReceiverSortie("1d03e85a-1fb9-4f6e-86a0-593306b6e3f0")
                        .numRecAircraft(3)
                        .packageId("135")
                        .receiverCallSign("BAKER")
                        .receiverCellPosition(2)
                        .receiverCoord("TTC601")
                        .receiverDeliveryMethod("DROGUE")
                        .receiverDeployedIcao("KOFF")
                        .receiverExercise("NATO19")
                        .receiverFuelType("JP8")
                        .receiverLegNum(825)
                        .receiverMds("KC135R")
                        .receiverOwner("117ARW")
                        .receiverPoc("JOHN SMITH (555)555-5555")
                        .recOrg("AMC")
                        .sequenceNum("1018")
                        .build()
                )
                .addRemark(
                    AirEventTupleResponse.Remark.builder()
                        .date(OffsetDateTime.parse("2024-01-01T01:01:01.123Z"))
                        .externalRemarkId("23ea2877a6f74d7d8f309567a5896441")
                        .text("Example air event remarks.")
                        .user("John Doe")
                        .build()
                )
                .revTrack(true)
                .rzct(OffsetDateTime.parse("2024-01-07T13:55:43.123Z"))
                .rzPoint("AN")
                .rzType("PP")
                .shortTrack(true)
                .sourceDl("AXE")
                .statusCode("R")
                .addTanker(
                    AirEventTupleResponse.Tanker.builder()
                        .altTankerMissionId("1UN05201L121")
                        .amcTankerMissionId("8PH000B1S052")
                        .dualRole(true)
                        .externalTankerId("ca673c580fb949a5b733f0e0b67ffab2")
                        .fuelOff(15000000.1)
                        .idTankerAirfield("b33955d2-67d3-42be-8316-263e284ce6cc")
                        .idTankerMission("edef700c-9917-4dbf-a153-89ffd4446fe9")
                        .idTankerSortie("d833a4bc-756b-41d5-8845-f146fe563387")
                        .tankerCallSign("BAKER")
                        .tankerCellPosition(2)
                        .tankerCoord("TTC601")
                        .tankerDeliveryMethod("DROGUE")
                        .tankerDeployedIcao("KOFF")
                        .tankerFuelType("JP8")
                        .tankerLegNum(825)
                        .tankerMds("KC135R")
                        .tankerOwner("117ARW")
                        .tankerPoc("JOHN SMITH (555)555-5555")
                        .build()
                )
                .trackTime(1.5)
                .updatedAt(OffsetDateTime.parse("2018-01-01T16:00:00.123Z"))
                .updatedBy("some.user")
                .build()

        assertThat(airEventTupleResponse.classificationMarking()).isEqualTo("U")
        assertThat(airEventTupleResponse.dataMode()).isEqualTo(AirEventTupleResponse.DataMode.TEST)
        assertThat(airEventTupleResponse.source()).isEqualTo("Bluestaq")
        assertThat(airEventTupleResponse.type()).isEqualTo("FUEL TRANSFER")
        assertThat(airEventTupleResponse.id()).contains("026dd511-8ba5-47d3-9909-836149f87686")
        assertThat(airEventTupleResponse.actualArrTime())
            .contains(OffsetDateTime.parse("2024-01-07T14:00:03.123Z"))
        assertThat(airEventTupleResponse.actualDepTime())
            .contains(OffsetDateTime.parse("2024-01-07T14:17:03.123Z"))
        assertThat(airEventTupleResponse.arct())
            .contains(OffsetDateTime.parse("2024-01-07T15:11:27.123Z"))
        assertThat(airEventTupleResponse.arEventType()).contains("V")
        assertThat(airEventTupleResponse.arrPurpose()).contains("A")
        assertThat(airEventTupleResponse.arTrackId()).contains("CH61")
        assertThat(airEventTupleResponse.arTrackName()).contains("CH61 POST")
        assertThat(airEventTupleResponse.baseAlt()).contains(28000.1)
        assertThat(airEventTupleResponse.cancelled()).contains(false)
        assertThat(airEventTupleResponse.createdAt())
            .contains(OffsetDateTime.parse("2018-01-01T16:00:00.123Z"))
        assertThat(airEventTupleResponse.createdBy()).contains("some.user")
        assertThat(airEventTupleResponse.depPurpose()).contains("Q")
        assertThat(airEventTupleResponse.estArrTime())
            .contains(OffsetDateTime.parse("2024-01-07T13:59:48.123Z"))
        assertThat(airEventTupleResponse.estDepTime())
            .contains(OffsetDateTime.parse("2024-01-07T14:19:48.123Z"))
        assertThat(airEventTupleResponse.externalAirEventId()).contains("MB014313032022407540")
        assertThat(airEventTupleResponse.externalArTrackId())
            .contains("6418a4b68e5c3896bf024cc79aa4174c")
        assertThat(airEventTupleResponse.idMission())
            .contains("190dea6d-2a90-45a2-a276-be9047d9b96c")
        assertThat(airEventTupleResponse.idSortie())
            .contains("b9866c03-2397-4506-8153-852e72d9b54f")
        assertThat(airEventTupleResponse.legNum()).contains(825)
        assertThat(airEventTupleResponse.location()).contains("901EW")
        assertThat(airEventTupleResponse.numTankers()).contains(1)
        assertThat(airEventTupleResponse.origin()).contains("THIRD_PARTY_DATASOURCE")
        assertThat(airEventTupleResponse.origNetwork()).contains("OPS1")
        assertThat(airEventTupleResponse.plannedArrTime())
            .contains(OffsetDateTime.parse("2024-01-07T13:55:43.123Z"))
        assertThat(airEventTupleResponse.plannedDepTime())
            .contains(OffsetDateTime.parse("2024-01-07T14:15:43.123Z"))
        assertThat(airEventTupleResponse.priority()).contains("1A2")
        assertThat(airEventTupleResponse.receivers().getOrNull())
            .containsExactly(
                AirEventTupleResponse.Receiver.builder()
                    .altReceiverMissionId("1UN05201L121")
                    .amcReceiverMissionId("8PH000B1S052")
                    .externalReceiverId("3fb8169f-adc1-4667-acab-8415a012d766")
                    .fuelOn(15000000.1)
                    .idReceiverAirfield("96c4c2ba-a031-4e58-9b8e-3c6fb90a7534")
                    .idReceiverMission("ce99757d-f733-461f-8939-3939d4f05946")
                    .idReceiverSortie("1d03e85a-1fb9-4f6e-86a0-593306b6e3f0")
                    .numRecAircraft(3)
                    .packageId("135")
                    .receiverCallSign("BAKER")
                    .receiverCellPosition(2)
                    .receiverCoord("TTC601")
                    .receiverDeliveryMethod("DROGUE")
                    .receiverDeployedIcao("KOFF")
                    .receiverExercise("NATO19")
                    .receiverFuelType("JP8")
                    .receiverLegNum(825)
                    .receiverMds("KC135R")
                    .receiverOwner("117ARW")
                    .receiverPoc("JOHN SMITH (555)555-5555")
                    .recOrg("AMC")
                    .sequenceNum("1018")
                    .build()
            )
        assertThat(airEventTupleResponse.remarks().getOrNull())
            .containsExactly(
                AirEventTupleResponse.Remark.builder()
                    .date(OffsetDateTime.parse("2024-01-01T01:01:01.123Z"))
                    .externalRemarkId("23ea2877a6f74d7d8f309567a5896441")
                    .text("Example air event remarks.")
                    .user("John Doe")
                    .build()
            )
        assertThat(airEventTupleResponse.revTrack()).contains(true)
        assertThat(airEventTupleResponse.rzct())
            .contains(OffsetDateTime.parse("2024-01-07T13:55:43.123Z"))
        assertThat(airEventTupleResponse.rzPoint()).contains("AN")
        assertThat(airEventTupleResponse.rzType()).contains("PP")
        assertThat(airEventTupleResponse.shortTrack()).contains(true)
        assertThat(airEventTupleResponse.sourceDl()).contains("AXE")
        assertThat(airEventTupleResponse.statusCode()).contains("R")
        assertThat(airEventTupleResponse.tankers().getOrNull())
            .containsExactly(
                AirEventTupleResponse.Tanker.builder()
                    .altTankerMissionId("1UN05201L121")
                    .amcTankerMissionId("8PH000B1S052")
                    .dualRole(true)
                    .externalTankerId("ca673c580fb949a5b733f0e0b67ffab2")
                    .fuelOff(15000000.1)
                    .idTankerAirfield("b33955d2-67d3-42be-8316-263e284ce6cc")
                    .idTankerMission("edef700c-9917-4dbf-a153-89ffd4446fe9")
                    .idTankerSortie("d833a4bc-756b-41d5-8845-f146fe563387")
                    .tankerCallSign("BAKER")
                    .tankerCellPosition(2)
                    .tankerCoord("TTC601")
                    .tankerDeliveryMethod("DROGUE")
                    .tankerDeployedIcao("KOFF")
                    .tankerFuelType("JP8")
                    .tankerLegNum(825)
                    .tankerMds("KC135R")
                    .tankerOwner("117ARW")
                    .tankerPoc("JOHN SMITH (555)555-5555")
                    .build()
            )
        assertThat(airEventTupleResponse.trackTime()).contains(1.5)
        assertThat(airEventTupleResponse.updatedAt())
            .contains(OffsetDateTime.parse("2018-01-01T16:00:00.123Z"))
        assertThat(airEventTupleResponse.updatedBy()).contains("some.user")
    }

    @Test
    fun roundtrip() {
        val jsonMapper = jsonMapper()
        val airEventTupleResponse =
            AirEventTupleResponse.builder()
                .classificationMarking("U")
                .dataMode(AirEventTupleResponse.DataMode.TEST)
                .source("Bluestaq")
                .type("FUEL TRANSFER")
                .id("026dd511-8ba5-47d3-9909-836149f87686")
                .actualArrTime(OffsetDateTime.parse("2024-01-07T14:00:03.123Z"))
                .actualDepTime(OffsetDateTime.parse("2024-01-07T14:17:03.123Z"))
                .arct(OffsetDateTime.parse("2024-01-07T15:11:27.123Z"))
                .arEventType("V")
                .arrPurpose("A")
                .arTrackId("CH61")
                .arTrackName("CH61 POST")
                .baseAlt(28000.1)
                .cancelled(false)
                .createdAt(OffsetDateTime.parse("2018-01-01T16:00:00.123Z"))
                .createdBy("some.user")
                .depPurpose("Q")
                .estArrTime(OffsetDateTime.parse("2024-01-07T13:59:48.123Z"))
                .estDepTime(OffsetDateTime.parse("2024-01-07T14:19:48.123Z"))
                .externalAirEventId("MB014313032022407540")
                .externalArTrackId("6418a4b68e5c3896bf024cc79aa4174c")
                .idMission("190dea6d-2a90-45a2-a276-be9047d9b96c")
                .idSortie("b9866c03-2397-4506-8153-852e72d9b54f")
                .legNum(825)
                .location("901EW")
                .numTankers(1)
                .origin("THIRD_PARTY_DATASOURCE")
                .origNetwork("OPS1")
                .plannedArrTime(OffsetDateTime.parse("2024-01-07T13:55:43.123Z"))
                .plannedDepTime(OffsetDateTime.parse("2024-01-07T14:15:43.123Z"))
                .priority("1A2")
                .addReceiver(
                    AirEventTupleResponse.Receiver.builder()
                        .altReceiverMissionId("1UN05201L121")
                        .amcReceiverMissionId("8PH000B1S052")
                        .externalReceiverId("3fb8169f-adc1-4667-acab-8415a012d766")
                        .fuelOn(15000000.1)
                        .idReceiverAirfield("96c4c2ba-a031-4e58-9b8e-3c6fb90a7534")
                        .idReceiverMission("ce99757d-f733-461f-8939-3939d4f05946")
                        .idReceiverSortie("1d03e85a-1fb9-4f6e-86a0-593306b6e3f0")
                        .numRecAircraft(3)
                        .packageId("135")
                        .receiverCallSign("BAKER")
                        .receiverCellPosition(2)
                        .receiverCoord("TTC601")
                        .receiverDeliveryMethod("DROGUE")
                        .receiverDeployedIcao("KOFF")
                        .receiverExercise("NATO19")
                        .receiverFuelType("JP8")
                        .receiverLegNum(825)
                        .receiverMds("KC135R")
                        .receiverOwner("117ARW")
                        .receiverPoc("JOHN SMITH (555)555-5555")
                        .recOrg("AMC")
                        .sequenceNum("1018")
                        .build()
                )
                .addRemark(
                    AirEventTupleResponse.Remark.builder()
                        .date(OffsetDateTime.parse("2024-01-01T01:01:01.123Z"))
                        .externalRemarkId("23ea2877a6f74d7d8f309567a5896441")
                        .text("Example air event remarks.")
                        .user("John Doe")
                        .build()
                )
                .revTrack(true)
                .rzct(OffsetDateTime.parse("2024-01-07T13:55:43.123Z"))
                .rzPoint("AN")
                .rzType("PP")
                .shortTrack(true)
                .sourceDl("AXE")
                .statusCode("R")
                .addTanker(
                    AirEventTupleResponse.Tanker.builder()
                        .altTankerMissionId("1UN05201L121")
                        .amcTankerMissionId("8PH000B1S052")
                        .dualRole(true)
                        .externalTankerId("ca673c580fb949a5b733f0e0b67ffab2")
                        .fuelOff(15000000.1)
                        .idTankerAirfield("b33955d2-67d3-42be-8316-263e284ce6cc")
                        .idTankerMission("edef700c-9917-4dbf-a153-89ffd4446fe9")
                        .idTankerSortie("d833a4bc-756b-41d5-8845-f146fe563387")
                        .tankerCallSign("BAKER")
                        .tankerCellPosition(2)
                        .tankerCoord("TTC601")
                        .tankerDeliveryMethod("DROGUE")
                        .tankerDeployedIcao("KOFF")
                        .tankerFuelType("JP8")
                        .tankerLegNum(825)
                        .tankerMds("KC135R")
                        .tankerOwner("117ARW")
                        .tankerPoc("JOHN SMITH (555)555-5555")
                        .build()
                )
                .trackTime(1.5)
                .updatedAt(OffsetDateTime.parse("2018-01-01T16:00:00.123Z"))
                .updatedBy("some.user")
                .build()

        val roundtrippedAirEventTupleResponse =
            jsonMapper.readValue(
                jsonMapper.writeValueAsString(airEventTupleResponse),
                jacksonTypeRef<AirEventTupleResponse>(),
            )

        assertThat(roundtrippedAirEventTupleResponse).isEqualTo(airEventTupleResponse)
    }
}
