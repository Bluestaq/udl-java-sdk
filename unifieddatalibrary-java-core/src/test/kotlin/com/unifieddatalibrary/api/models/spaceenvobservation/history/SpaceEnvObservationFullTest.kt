// File generated from our OpenAPI spec by Stainless.

package com.unifieddatalibrary.api.models.spaceenvobservation.history

import com.fasterxml.jackson.module.kotlin.jacksonTypeRef
import com.unifieddatalibrary.api.core.jsonMapper
import java.time.OffsetDateTime
import kotlin.jvm.optionals.getOrNull
import org.assertj.core.api.Assertions.assertThat
import org.junit.jupiter.api.Test

internal class SpaceEnvObservationFullTest {

    @Test
    fun create() {
        val spaceEnvObservationFull =
            SpaceEnvObservationFull.builder()
                .classificationMarking("U")
                .dataMode(SpaceEnvObservationFull.DataMode.TEST)
                .obTime(OffsetDateTime.parse("2023-06-07T14:17:39.653Z"))
                .source("Bluestaq")
                .id("f13f82b8-5d2a-407a-b3f3-1fe30ca79eae")
                .alt(35785.3732)
                .createdAt(OffsetDateTime.parse("2023-01-01T16:00:00.123Z"))
                .createdBy("some.user")
                .dataType("ECP")
                .derived(false)
                .description("Observation Data Description Text")
                .descriptor("energetic charged particle")
                .externalId("fe4ad5dc-0128-4ce8-b09c-0b404322025e")
                .forecast(true)
                .genSystem("System Name")
                .genTime(OffsetDateTime.parse("2023-02-10T19:48:09.934Z"))
                .idOnOrbit("41866")
                .idSensor("ECP-1")
                .instrumentType("MAGNETOMETER")
                .lat(38.8339)
                .lon(-104.8214)
                .measType("ENERGETIC PARTICLES")
                .msgType("SODM")
                .observatoryName("GOES-16")
                .observatoryNotes("Notes")
                .observatoryType("ONORBIT")
                .obSetId("ECPOBSET-478125")
                .origin("OPS1")
                .origNetwork("ORIG")
                .origObjectId("41866")
                .origSensorId("ECP-1")
                .particleType("PROTON")
                .quality("GOOD")
                .satNo(41866)
                .senEnergyLevel("0500-700 keV")
                .senPos(listOf(4174.78541785946, -9969.69867853067, 40733.9284531208))
                .senReferenceFrame(SpaceEnvObservationFull.SenReferenceFrame.J2000)
                .senVel(listOf(0.727059797295872, 0.298037087322647, 0.00157064850994095))
                .addSeoList(
                    SpaceEnvObservationFull.SeoList.builder()
                        .obType("INTEGRAL FLUX")
                        .obUoM("particles/cm^2/s/sr")
                        .obArray(listOf(1.7, 35.6, 21.2, 19.01))
                        .obBool(true)
                        .obDescription("Observation Description Text")
                        .obQuality("GOOD")
                        .obString("C1.3")
                        .obValue(0.487687826)
                        .build()
                )
                .addSrcId("615236d7-d464-4b8c-9b0b-45994e017d80")
                .addSrcId("8a38e3d6-35fd-4bda-b883-e3724e6bc6b9")
                .addSrcTyp("SPACEENVOB")
                .addSrcTyp("SGI")
                .build()

        assertThat(spaceEnvObservationFull.classificationMarking()).isEqualTo("U")
        assertThat(spaceEnvObservationFull.dataMode())
            .isEqualTo(SpaceEnvObservationFull.DataMode.TEST)
        assertThat(spaceEnvObservationFull.obTime())
            .isEqualTo(OffsetDateTime.parse("2023-06-07T14:17:39.653Z"))
        assertThat(spaceEnvObservationFull.source()).isEqualTo("Bluestaq")
        assertThat(spaceEnvObservationFull.id()).contains("f13f82b8-5d2a-407a-b3f3-1fe30ca79eae")
        assertThat(spaceEnvObservationFull.alt()).contains(35785.3732)
        assertThat(spaceEnvObservationFull.createdAt())
            .contains(OffsetDateTime.parse("2023-01-01T16:00:00.123Z"))
        assertThat(spaceEnvObservationFull.createdBy()).contains("some.user")
        assertThat(spaceEnvObservationFull.dataType()).contains("ECP")
        assertThat(spaceEnvObservationFull.derived()).contains(false)
        assertThat(spaceEnvObservationFull.description())
            .contains("Observation Data Description Text")
        assertThat(spaceEnvObservationFull.descriptor()).contains("energetic charged particle")
        assertThat(spaceEnvObservationFull.externalId())
            .contains("fe4ad5dc-0128-4ce8-b09c-0b404322025e")
        assertThat(spaceEnvObservationFull.forecast()).contains(true)
        assertThat(spaceEnvObservationFull.genSystem()).contains("System Name")
        assertThat(spaceEnvObservationFull.genTime())
            .contains(OffsetDateTime.parse("2023-02-10T19:48:09.934Z"))
        assertThat(spaceEnvObservationFull.idOnOrbit()).contains("41866")
        assertThat(spaceEnvObservationFull.idSensor()).contains("ECP-1")
        assertThat(spaceEnvObservationFull.instrumentType()).contains("MAGNETOMETER")
        assertThat(spaceEnvObservationFull.lat()).contains(38.8339)
        assertThat(spaceEnvObservationFull.lon()).contains(-104.8214)
        assertThat(spaceEnvObservationFull.measType()).contains("ENERGETIC PARTICLES")
        assertThat(spaceEnvObservationFull.msgType()).contains("SODM")
        assertThat(spaceEnvObservationFull.observatoryName()).contains("GOES-16")
        assertThat(spaceEnvObservationFull.observatoryNotes()).contains("Notes")
        assertThat(spaceEnvObservationFull.observatoryType()).contains("ONORBIT")
        assertThat(spaceEnvObservationFull.obSetId()).contains("ECPOBSET-478125")
        assertThat(spaceEnvObservationFull.origin()).contains("OPS1")
        assertThat(spaceEnvObservationFull.origNetwork()).contains("ORIG")
        assertThat(spaceEnvObservationFull.origObjectId()).contains("41866")
        assertThat(spaceEnvObservationFull.origSensorId()).contains("ECP-1")
        assertThat(spaceEnvObservationFull.particleType()).contains("PROTON")
        assertThat(spaceEnvObservationFull.quality()).contains("GOOD")
        assertThat(spaceEnvObservationFull.satNo()).contains(41866)
        assertThat(spaceEnvObservationFull.senEnergyLevel()).contains("0500-700 keV")
        assertThat(spaceEnvObservationFull.senPos().getOrNull())
            .containsExactly(4174.78541785946, -9969.69867853067, 40733.9284531208)
        assertThat(spaceEnvObservationFull.senReferenceFrame())
            .contains(SpaceEnvObservationFull.SenReferenceFrame.J2000)
        assertThat(spaceEnvObservationFull.senVel().getOrNull())
            .containsExactly(0.727059797295872, 0.298037087322647, 0.00157064850994095)
        assertThat(spaceEnvObservationFull.seoList().getOrNull())
            .containsExactly(
                SpaceEnvObservationFull.SeoList.builder()
                    .obType("INTEGRAL FLUX")
                    .obUoM("particles/cm^2/s/sr")
                    .obArray(listOf(1.7, 35.6, 21.2, 19.01))
                    .obBool(true)
                    .obDescription("Observation Description Text")
                    .obQuality("GOOD")
                    .obString("C1.3")
                    .obValue(0.487687826)
                    .build()
            )
        assertThat(spaceEnvObservationFull.srcIds().getOrNull())
            .containsExactly(
                "615236d7-d464-4b8c-9b0b-45994e017d80",
                "8a38e3d6-35fd-4bda-b883-e3724e6bc6b9",
            )
        assertThat(spaceEnvObservationFull.srcTyps().getOrNull())
            .containsExactly("SPACEENVOB", "SGI")
    }

    @Test
    fun roundtrip() {
        val jsonMapper = jsonMapper()
        val spaceEnvObservationFull =
            SpaceEnvObservationFull.builder()
                .classificationMarking("U")
                .dataMode(SpaceEnvObservationFull.DataMode.TEST)
                .obTime(OffsetDateTime.parse("2023-06-07T14:17:39.653Z"))
                .source("Bluestaq")
                .id("f13f82b8-5d2a-407a-b3f3-1fe30ca79eae")
                .alt(35785.3732)
                .createdAt(OffsetDateTime.parse("2023-01-01T16:00:00.123Z"))
                .createdBy("some.user")
                .dataType("ECP")
                .derived(false)
                .description("Observation Data Description Text")
                .descriptor("energetic charged particle")
                .externalId("fe4ad5dc-0128-4ce8-b09c-0b404322025e")
                .forecast(true)
                .genSystem("System Name")
                .genTime(OffsetDateTime.parse("2023-02-10T19:48:09.934Z"))
                .idOnOrbit("41866")
                .idSensor("ECP-1")
                .instrumentType("MAGNETOMETER")
                .lat(38.8339)
                .lon(-104.8214)
                .measType("ENERGETIC PARTICLES")
                .msgType("SODM")
                .observatoryName("GOES-16")
                .observatoryNotes("Notes")
                .observatoryType("ONORBIT")
                .obSetId("ECPOBSET-478125")
                .origin("OPS1")
                .origNetwork("ORIG")
                .origObjectId("41866")
                .origSensorId("ECP-1")
                .particleType("PROTON")
                .quality("GOOD")
                .satNo(41866)
                .senEnergyLevel("0500-700 keV")
                .senPos(listOf(4174.78541785946, -9969.69867853067, 40733.9284531208))
                .senReferenceFrame(SpaceEnvObservationFull.SenReferenceFrame.J2000)
                .senVel(listOf(0.727059797295872, 0.298037087322647, 0.00157064850994095))
                .addSeoList(
                    SpaceEnvObservationFull.SeoList.builder()
                        .obType("INTEGRAL FLUX")
                        .obUoM("particles/cm^2/s/sr")
                        .obArray(listOf(1.7, 35.6, 21.2, 19.01))
                        .obBool(true)
                        .obDescription("Observation Description Text")
                        .obQuality("GOOD")
                        .obString("C1.3")
                        .obValue(0.487687826)
                        .build()
                )
                .addSrcId("615236d7-d464-4b8c-9b0b-45994e017d80")
                .addSrcId("8a38e3d6-35fd-4bda-b883-e3724e6bc6b9")
                .addSrcTyp("SPACEENVOB")
                .addSrcTyp("SGI")
                .build()

        val roundtrippedSpaceEnvObservationFull =
            jsonMapper.readValue(
                jsonMapper.writeValueAsString(spaceEnvObservationFull),
                jacksonTypeRef<SpaceEnvObservationFull>(),
            )

        assertThat(roundtrippedSpaceEnvObservationFull).isEqualTo(spaceEnvObservationFull)
    }
}
