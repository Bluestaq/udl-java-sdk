// File generated from our OpenAPI spec by Stainless.

package com.unifieddatalibrary.api.models.closelyspacedobjects

import com.fasterxml.jackson.module.kotlin.jacksonTypeRef
import com.unifieddatalibrary.api.core.jsonMapper
import java.time.OffsetDateTime
import kotlin.jvm.optionals.getOrNull
import org.assertj.core.api.Assertions.assertThat
import org.junit.jupiter.api.Test

internal class CloselyspacedobjectRetrieveResponseTest {

    @Test
    fun create() {
        val closelyspacedobjectRetrieveResponse =
            CloselyspacedobjectRetrieveResponse.builder()
                .classificationMarking("U")
                .csoState("POSSIBLE")
                .dataMode(CloselyspacedobjectRetrieveResponse.DataMode.TEST)
                .eventStartTime(OffsetDateTime.parse("2019-12-27T18:11:19.117Z"))
                .eventType("RENDEZVOUS")
                .source("Bluestaq")
                .id("026dd511-8ba5-47d3-9909-836149f87686")
                .actorSvEpoch(OffsetDateTime.parse("2019-12-27T18:11:19.117Z"))
                .analysisDuration(60.1)
                .analysisEpoch(OffsetDateTime.parse("2019-12-27T18:11:19.117Z"))
                .compType("LONGITUDE")
                .contextKeys(listOf("MsnID_DescLabel", "msnVer", "serVer"))
                .contextValues(listOf("MissionID Descriptive Label text", "1", "001.9b"))
                .createdAt(OffsetDateTime.parse("2018-01-01T16:00:00.123Z"))
                .createdBy("some.user")
                .addCsoDetail(
                    CloselyspacedobjectRetrieveResponse.CsoDetail.builder()
                        .objectEvent("MEAN")
                        .objectType("DELTA")
                        .id("026dd511-8ba5-47d3-9909-836149f87686")
                        .apogee(1.1)
                        .classificationMarking("U")
                        .dataMode(CloselyspacedobjectRetrieveResponse.CsoDetail.DataMode.TEST)
                        .idCso("CSO-ID")
                        .inclination(45.1)
                        .longitude(45.1)
                        .perigee(1.1)
                        .build()
                )
                .deltaVTol(0.123)
                .durationThreshold(60.1)
                .eventEndTime(OffsetDateTime.parse("2019-12-27T18:11:19.117Z"))
                .eventIntervalCoverage(22.3)
                .extId("EXTERNAL-ID")
                .hohmannDeltaV(0.012)
                .idActorSv("ACTOR-SV-ID")
                .idOnOrbit1("ONORBIT1-ID")
                .idOnOrbit2("ONORBIT2-ID")
                .idTargetSv("TARGET-SV-ID")
                .inclinationDeltaV(0.012)
                .indicationSource("Manually input")
                .lonTol(30.1)
                .maxRange(233.266)
                .minPlaneSepAngle(30.1)
                .minPlaneSepEpoch(OffsetDateTime.parse("2019-12-27T18:11:19.117Z"))
                .minRange(0.5)
                .minRangeAnalysisDuration(60.1)
                .minRangeEpoch(OffsetDateTime.parse("2019-12-27T18:11:19.117Z"))
                .notes("FREE-TEXT")
                .numSubIntervals(0)
                .orbitAlignDel(12.3)
                .orbitPlaneTol(1.23)
                .origin("THIRD_PARTY_DATASOURCE")
                .origNetwork("OPS1")
                .origObjectId1("ORIGONORBIT1-ID")
                .origObjectId2("ORIGONORBIT2-ID")
                .rangeThreshold(0.1)
                .rangeTol(0.123)
                .relPos(listOf(0.12, 0.23, -0.12))
                .relPosMag(0.12)
                .relSpeedMag(1.23)
                .relVel(listOf(0.12, 0.23, -0.12))
                .satNo1(1)
                .satNo2(2)
                .sourceDl("AXE")
                .stationLimLonTol(12.5)
                .targetSvEpoch(OffsetDateTime.parse("2019-12-27T18:11:19.117Z"))
                .totalDeltaV(2.46)
                .build()

        assertThat(closelyspacedobjectRetrieveResponse.classificationMarking()).isEqualTo("U")
        assertThat(closelyspacedobjectRetrieveResponse.csoState()).isEqualTo("POSSIBLE")
        assertThat(closelyspacedobjectRetrieveResponse.dataMode())
            .isEqualTo(CloselyspacedobjectRetrieveResponse.DataMode.TEST)
        assertThat(closelyspacedobjectRetrieveResponse.eventStartTime())
            .isEqualTo(OffsetDateTime.parse("2019-12-27T18:11:19.117Z"))
        assertThat(closelyspacedobjectRetrieveResponse.eventType()).isEqualTo("RENDEZVOUS")
        assertThat(closelyspacedobjectRetrieveResponse.source()).isEqualTo("Bluestaq")
        assertThat(closelyspacedobjectRetrieveResponse.id())
            .contains("026dd511-8ba5-47d3-9909-836149f87686")
        assertThat(closelyspacedobjectRetrieveResponse.actorSvEpoch())
            .contains(OffsetDateTime.parse("2019-12-27T18:11:19.117Z"))
        assertThat(closelyspacedobjectRetrieveResponse.analysisDuration()).contains(60.1)
        assertThat(closelyspacedobjectRetrieveResponse.analysisEpoch())
            .contains(OffsetDateTime.parse("2019-12-27T18:11:19.117Z"))
        assertThat(closelyspacedobjectRetrieveResponse.compType()).contains("LONGITUDE")
        assertThat(closelyspacedobjectRetrieveResponse.contextKeys().getOrNull())
            .containsExactly("MsnID_DescLabel", "msnVer", "serVer")
        assertThat(closelyspacedobjectRetrieveResponse.contextValues().getOrNull())
            .containsExactly("MissionID Descriptive Label text", "1", "001.9b")
        assertThat(closelyspacedobjectRetrieveResponse.createdAt())
            .contains(OffsetDateTime.parse("2018-01-01T16:00:00.123Z"))
        assertThat(closelyspacedobjectRetrieveResponse.createdBy()).contains("some.user")
        assertThat(closelyspacedobjectRetrieveResponse.csoDetails().getOrNull())
            .containsExactly(
                CloselyspacedobjectRetrieveResponse.CsoDetail.builder()
                    .objectEvent("MEAN")
                    .objectType("DELTA")
                    .id("026dd511-8ba5-47d3-9909-836149f87686")
                    .apogee(1.1)
                    .classificationMarking("U")
                    .dataMode(CloselyspacedobjectRetrieveResponse.CsoDetail.DataMode.TEST)
                    .idCso("CSO-ID")
                    .inclination(45.1)
                    .longitude(45.1)
                    .perigee(1.1)
                    .build()
            )
        assertThat(closelyspacedobjectRetrieveResponse.deltaVTol()).contains(0.123)
        assertThat(closelyspacedobjectRetrieveResponse.durationThreshold()).contains(60.1)
        assertThat(closelyspacedobjectRetrieveResponse.eventEndTime())
            .contains(OffsetDateTime.parse("2019-12-27T18:11:19.117Z"))
        assertThat(closelyspacedobjectRetrieveResponse.eventIntervalCoverage()).contains(22.3)
        assertThat(closelyspacedobjectRetrieveResponse.extId()).contains("EXTERNAL-ID")
        assertThat(closelyspacedobjectRetrieveResponse.hohmannDeltaV()).contains(0.012)
        assertThat(closelyspacedobjectRetrieveResponse.idActorSv()).contains("ACTOR-SV-ID")
        assertThat(closelyspacedobjectRetrieveResponse.idOnOrbit1()).contains("ONORBIT1-ID")
        assertThat(closelyspacedobjectRetrieveResponse.idOnOrbit2()).contains("ONORBIT2-ID")
        assertThat(closelyspacedobjectRetrieveResponse.idTargetSv()).contains("TARGET-SV-ID")
        assertThat(closelyspacedobjectRetrieveResponse.inclinationDeltaV()).contains(0.012)
        assertThat(closelyspacedobjectRetrieveResponse.indicationSource())
            .contains("Manually input")
        assertThat(closelyspacedobjectRetrieveResponse.lonTol()).contains(30.1)
        assertThat(closelyspacedobjectRetrieveResponse.maxRange()).contains(233.266)
        assertThat(closelyspacedobjectRetrieveResponse.minPlaneSepAngle()).contains(30.1)
        assertThat(closelyspacedobjectRetrieveResponse.minPlaneSepEpoch())
            .contains(OffsetDateTime.parse("2019-12-27T18:11:19.117Z"))
        assertThat(closelyspacedobjectRetrieveResponse.minRange()).contains(0.5)
        assertThat(closelyspacedobjectRetrieveResponse.minRangeAnalysisDuration()).contains(60.1)
        assertThat(closelyspacedobjectRetrieveResponse.minRangeEpoch())
            .contains(OffsetDateTime.parse("2019-12-27T18:11:19.117Z"))
        assertThat(closelyspacedobjectRetrieveResponse.notes()).contains("FREE-TEXT")
        assertThat(closelyspacedobjectRetrieveResponse.numSubIntervals()).contains(0)
        assertThat(closelyspacedobjectRetrieveResponse.orbitAlignDel()).contains(12.3)
        assertThat(closelyspacedobjectRetrieveResponse.orbitPlaneTol()).contains(1.23)
        assertThat(closelyspacedobjectRetrieveResponse.origin()).contains("THIRD_PARTY_DATASOURCE")
        assertThat(closelyspacedobjectRetrieveResponse.origNetwork()).contains("OPS1")
        assertThat(closelyspacedobjectRetrieveResponse.origObjectId1()).contains("ORIGONORBIT1-ID")
        assertThat(closelyspacedobjectRetrieveResponse.origObjectId2()).contains("ORIGONORBIT2-ID")
        assertThat(closelyspacedobjectRetrieveResponse.rangeThreshold()).contains(0.1)
        assertThat(closelyspacedobjectRetrieveResponse.rangeTol()).contains(0.123)
        assertThat(closelyspacedobjectRetrieveResponse.relPos().getOrNull())
            .containsExactly(0.12, 0.23, -0.12)
        assertThat(closelyspacedobjectRetrieveResponse.relPosMag()).contains(0.12)
        assertThat(closelyspacedobjectRetrieveResponse.relSpeedMag()).contains(1.23)
        assertThat(closelyspacedobjectRetrieveResponse.relVel().getOrNull())
            .containsExactly(0.12, 0.23, -0.12)
        assertThat(closelyspacedobjectRetrieveResponse.satNo1()).contains(1)
        assertThat(closelyspacedobjectRetrieveResponse.satNo2()).contains(2)
        assertThat(closelyspacedobjectRetrieveResponse.sourceDl()).contains("AXE")
        assertThat(closelyspacedobjectRetrieveResponse.stationLimLonTol()).contains(12.5)
        assertThat(closelyspacedobjectRetrieveResponse.targetSvEpoch())
            .contains(OffsetDateTime.parse("2019-12-27T18:11:19.117Z"))
        assertThat(closelyspacedobjectRetrieveResponse.totalDeltaV()).contains(2.46)
    }

    @Test
    fun roundtrip() {
        val jsonMapper = jsonMapper()
        val closelyspacedobjectRetrieveResponse =
            CloselyspacedobjectRetrieveResponse.builder()
                .classificationMarking("U")
                .csoState("POSSIBLE")
                .dataMode(CloselyspacedobjectRetrieveResponse.DataMode.TEST)
                .eventStartTime(OffsetDateTime.parse("2019-12-27T18:11:19.117Z"))
                .eventType("RENDEZVOUS")
                .source("Bluestaq")
                .id("026dd511-8ba5-47d3-9909-836149f87686")
                .actorSvEpoch(OffsetDateTime.parse("2019-12-27T18:11:19.117Z"))
                .analysisDuration(60.1)
                .analysisEpoch(OffsetDateTime.parse("2019-12-27T18:11:19.117Z"))
                .compType("LONGITUDE")
                .contextKeys(listOf("MsnID_DescLabel", "msnVer", "serVer"))
                .contextValues(listOf("MissionID Descriptive Label text", "1", "001.9b"))
                .createdAt(OffsetDateTime.parse("2018-01-01T16:00:00.123Z"))
                .createdBy("some.user")
                .addCsoDetail(
                    CloselyspacedobjectRetrieveResponse.CsoDetail.builder()
                        .objectEvent("MEAN")
                        .objectType("DELTA")
                        .id("026dd511-8ba5-47d3-9909-836149f87686")
                        .apogee(1.1)
                        .classificationMarking("U")
                        .dataMode(CloselyspacedobjectRetrieveResponse.CsoDetail.DataMode.TEST)
                        .idCso("CSO-ID")
                        .inclination(45.1)
                        .longitude(45.1)
                        .perigee(1.1)
                        .build()
                )
                .deltaVTol(0.123)
                .durationThreshold(60.1)
                .eventEndTime(OffsetDateTime.parse("2019-12-27T18:11:19.117Z"))
                .eventIntervalCoverage(22.3)
                .extId("EXTERNAL-ID")
                .hohmannDeltaV(0.012)
                .idActorSv("ACTOR-SV-ID")
                .idOnOrbit1("ONORBIT1-ID")
                .idOnOrbit2("ONORBIT2-ID")
                .idTargetSv("TARGET-SV-ID")
                .inclinationDeltaV(0.012)
                .indicationSource("Manually input")
                .lonTol(30.1)
                .maxRange(233.266)
                .minPlaneSepAngle(30.1)
                .minPlaneSepEpoch(OffsetDateTime.parse("2019-12-27T18:11:19.117Z"))
                .minRange(0.5)
                .minRangeAnalysisDuration(60.1)
                .minRangeEpoch(OffsetDateTime.parse("2019-12-27T18:11:19.117Z"))
                .notes("FREE-TEXT")
                .numSubIntervals(0)
                .orbitAlignDel(12.3)
                .orbitPlaneTol(1.23)
                .origin("THIRD_PARTY_DATASOURCE")
                .origNetwork("OPS1")
                .origObjectId1("ORIGONORBIT1-ID")
                .origObjectId2("ORIGONORBIT2-ID")
                .rangeThreshold(0.1)
                .rangeTol(0.123)
                .relPos(listOf(0.12, 0.23, -0.12))
                .relPosMag(0.12)
                .relSpeedMag(1.23)
                .relVel(listOf(0.12, 0.23, -0.12))
                .satNo1(1)
                .satNo2(2)
                .sourceDl("AXE")
                .stationLimLonTol(12.5)
                .targetSvEpoch(OffsetDateTime.parse("2019-12-27T18:11:19.117Z"))
                .totalDeltaV(2.46)
                .build()

        val roundtrippedCloselyspacedobjectRetrieveResponse =
            jsonMapper.readValue(
                jsonMapper.writeValueAsString(closelyspacedobjectRetrieveResponse),
                jacksonTypeRef<CloselyspacedobjectRetrieveResponse>(),
            )

        assertThat(roundtrippedCloselyspacedobjectRetrieveResponse)
            .isEqualTo(closelyspacedobjectRetrieveResponse)
    }
}
